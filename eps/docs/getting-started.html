<!DOCTYPE html>
<html lang="en">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.6.0">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content=
"width=device-width, initial-scale=1">
<title>EPS documentation | Getting Started</title>
<link rel="stylesheet" type="text/css" href=
"/eps/docs/static/css/main.css">
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script src="/eps/docs/static/js/mathjax/tex-chtml.js" id=
"MathJax-script" async></script>
<style type="text/css">
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .tango .hll { background-color: #ffffcc }
.highlight .tango { background: #f8f8f8; }
.highlight .tango .c { color: #8f5902; font-style: italic } /* Comment */
.highlight .tango .err { color: #a40000; border: 1px solid #ef2929 } /* Error */
.highlight .tango .g { color: #000000 } /* Generic */
.highlight .tango .k { color: #204a87; font-weight: bold } /* Keyword */
.highlight .tango .l { color: #000000 } /* Literal */
.highlight .tango .n { color: #000000 } /* Name */
.highlight .tango .o { color: #ce5c00; font-weight: bold } /* Operator */
.highlight .tango .x { color: #000000 } /* Other */
.highlight .tango .p { color: #000000; font-weight: bold } /* Punctuation */
.highlight .tango .ch { color: #8f5902; font-style: italic } /* Comment.Hashbang */
.highlight .tango .cm { color: #8f5902; font-style: italic } /* Comment.Multiline */
.highlight .tango .cp { color: #8f5902; font-style: italic } /* Comment.Preproc */
.highlight .tango .cpf { color: #8f5902; font-style: italic } /* Comment.PreprocFile */
.highlight .tango .c1 { color: #8f5902; font-style: italic } /* Comment.Single */
.highlight .tango .cs { color: #8f5902; font-style: italic } /* Comment.Special */
.highlight .tango .gd { color: #a40000 } /* Generic.Deleted */
.highlight .tango .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .tango .gr { color: #ef2929 } /* Generic.Error */
.highlight .tango .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .tango .gi { color: #00A000 } /* Generic.Inserted */
.highlight .tango .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .tango .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .tango .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .tango .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .tango .gt { color: #a40000; font-weight: bold } /* Generic.Traceback */
.highlight .tango .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .tango .kd { color: #204a87; font-weight: bold } /* Keyword.Declaration */
.highlight .tango .kn { color: #204a87; font-weight: bold } /* Keyword.Namespace */
.highlight .tango .kp { color: #204a87; font-weight: bold } /* Keyword.Pseudo */
.highlight .tango .kr { color: #204a87; font-weight: bold } /* Keyword.Reserved */
.highlight .tango .kt { color: #204a87; font-weight: bold } /* Keyword.Type */
.highlight .tango .ld { color: #000000 } /* Literal.Date */
.highlight .tango .m { color: #0000cf; font-weight: bold } /* Literal.Number */
.highlight .tango .s { color: #4e9a06 } /* Literal.String */
.highlight .tango .na { color: #c4a000 } /* Name.Attribute */
.highlight .tango .nb { color: #204a87 } /* Name.Builtin */
.highlight .tango .nc { color: #000000 } /* Name.Class */
.highlight .tango .no { color: #000000 } /* Name.Constant */
.highlight .tango .nd { color: #5c35cc; font-weight: bold } /* Name.Decorator */
.highlight .tango .ni { color: #ce5c00 } /* Name.Entity */
.highlight .tango .ne { color: #cc0000; font-weight: bold } /* Name.Exception */
.highlight .tango .nf { color: #000000 } /* Name.Function */
.highlight .tango .nl { color: #f57900 } /* Name.Label */
.highlight .tango .nn { color: #000000 } /* Name.Namespace */
.highlight .tango .nx { color: #000000 } /* Name.Other */
.highlight .tango .py { color: #000000 } /* Name.Property */
.highlight .tango .nt { color: #204a87; font-weight: bold } /* Name.Tag */
.highlight .tango .nv { color: #000000 } /* Name.Variable */
.highlight .tango .ow { color: #204a87; font-weight: bold } /* Operator.Word */
.highlight .tango .w { color: #f8f8f8; text-decoration: underline } /* Text.Whitespace */
.highlight .tango .mb { color: #0000cf; font-weight: bold } /* Literal.Number.Bin */
.highlight .tango .mf { color: #0000cf; font-weight: bold } /* Literal.Number.Float */
.highlight .tango .mh { color: #0000cf; font-weight: bold } /* Literal.Number.Hex */
.highlight .tango .mi { color: #0000cf; font-weight: bold } /* Literal.Number.Integer */
.highlight .tango .mo { color: #0000cf; font-weight: bold } /* Literal.Number.Oct */
.highlight .tango .sa { color: #4e9a06 } /* Literal.String.Affix */
.highlight .tango .sb { color: #4e9a06 } /* Literal.String.Backtick */
.highlight .tango .sc { color: #4e9a06 } /* Literal.String.Char */
.highlight .tango .dl { color: #4e9a06 } /* Literal.String.Delimiter */
.highlight .tango .sd { color: #8f5902; font-style: italic } /* Literal.String.Doc */
.highlight .tango .s2 { color: #4e9a06 } /* Literal.String.Double */
.highlight .tango .se { color: #4e9a06 } /* Literal.String.Escape */
.highlight .tango .sh { color: #4e9a06 } /* Literal.String.Heredoc */
.highlight .tango .si { color: #4e9a06 } /* Literal.String.Interpol */
.highlight .tango .sx { color: #4e9a06 } /* Literal.String.Other */
.highlight .tango .sr { color: #4e9a06 } /* Literal.String.Regex */
.highlight .tango .s1 { color: #4e9a06 } /* Literal.String.Single */
.highlight .tango .ss { color: #4e9a06 } /* Literal.String.Symbol */
.highlight .tango .bp { color: #3465a4 } /* Name.Builtin.Pseudo */
.highlight .tango .fm { color: #000000 } /* Name.Function.Magic */
.highlight .tango .vc { color: #000000 } /* Name.Variable.Class */
.highlight .tango .vg { color: #000000 } /* Name.Variable.Global */
.highlight .tango .vi { color: #000000 } /* Name.Variable.Instance */
.highlight .tango .vm { color: #000000 } /* Name.Variable.Magic */
.highlight .tango .il { color: #0000cf; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div id="translation-notice">
<div class="message is-info">
<div class="message-body">
<p>This website was mostly translated automatically from the
<a href="/eps/de/doku/getting-started">German version</a>. We
apologize for any translation errors.</p>
<span class="x" onclick=
"localStorage.setItem('translation-notice', true);notice.style.display = 'none'">x</span></div>
</div>
</div>
<script>
var notice = document.getElementById("translation-notice")
if (localStorage.getItem("translation-notice") === null && notice !== null){
        notice.style.display = "block"
}
</script>
<nav class="navbar is-dark">
<div class="navbar-brand"><span class="navbar-burger burger"
data-target="side-menu" data-toggle="collapse"><span>&nbsp;</span>
<span>&nbsp;</span> <span>&nbsp;</span></span></div>
</nav>
<div class="main">
<div class="side-menu" id="side-menu" data-toggle-class=
"is-active">
<aside class="menu">
<p class="menu-label" style="text-align:center"><a href=
"/eps/docs">EPS documentation</a></p>
<ul class="menu-list">
<li><a href="/eps/docs">Start</a></li>
<li><a href="/eps/docs/getting-started">Getting Started</a></li>
<li><a class="" href="#" data-toggle="collapse" data-target=
"page-eps-nav">EPS Service</a>
<ul class="is-hidden" id="page-eps-nav">
<li><a href="/eps/docs/eps-service">Overview</a></li>
</ul>
</li>
<li><a class="" href="#" data-toggle="collapse" data-target=
"page-proxy-nav">Proxy Service</a>
<ul class="is-hidden" id="page-proxy-nav">
<li><a href="/eps/docs/proxy-service">Overview</a></li>
<li><a href=
"/eps/docs/proxy-service/installation">Installation</a></li>
<li><a href=
"/eps/docs/proxy-service/configuration">Configuration</a></li>
</ul>
</li>
<li><a class="" href="#" data-toggle="collapse" data-target=
"page-sd-nav">Service Directory</a>
<ul class="is-hidden" id="page-sd-nav">
<li><a href="/eps/docs/service-directory">Overview</a></li>
<li><a href=
"/eps/docs/service-directory/installation">Installation</a></li>
<li><a href=
"/eps/docs/service-directory/configuration">Configuration</a></li>
</ul>
</li>
<li><a href="/eps/docs/contact">Contact</a></li>
<li><a href="#" data-toggle="collapse" data-target=
"menu-language-dropdown">Languages</a>
<ul id="menu-language-dropdown" class="is-hidden">
<li><a class="is-open is-active" href=
"/eps/docs/getting-started">English</a></li>
<li><a class="" href=
"/eps/de/doku/getting-started">Deutsch</a></li>
</ul>
</li>
</ul>
</aside>
</div>
<div class="with-comments">
<div class="comments"></div>
<section class="section first">
<div class="content">
<div class="content markdown">
<h1>Getting Started</h1>
<p>Integrating with the IRIS infrastructure using the EPS server is
easy (we hope). First, you need to deploy the <code>eps</code>
server together with the settings and certificates we've provided
to you. This is as easy as downloading the latest <code>eps</code>
version from our server, unpacking the settings archive we've
provided you with and running</p>
<div class="codehilite">
<pre><code><span class="nv">EPS_SETTINGS</span><span class=
"o">=</span>path/to/settings eps server run
</code></pre></div>
<p>This should open a local JSON-RPC server on port
<code>5555</code> that you can connect to via TLS (you'll need to
add the root CA certificate to your certificate chain for this).
This server is your gateway to all IRIS services. Simply look up
the services that a specific operator provides and send a request
that contains the name of the operator and the service method you
want to call. For example, to interact with a "locations" service
provided by operator "ls-1", you'd simply post a JSON RPC message
like this:</p>
<div class="codehilite">
<pre><code><span class="p">{</span>
    <span class="nt">"method"</span><span class=
"p">:</span> <span class="s2">"ls-1.add"</span><span class=
"p">,</span>
    <span class="nt">"id"</span><span class=
"p">:</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="nt">"params"</span><span class=
"p">:</span> <span class="p">{</span>
        <span class="nt">"name"</span><span class=
"p">:</span> <span class="s2">"Ginos"</span><span class=
"p">,</span>
        <span class="nt">"id"</span><span class=
"p">:</span> <span class="s2">"af5ca4da5caa"</span>
    <span class="p">},</span>
    <span class="nt">"jsonrpc"</span><span class=
"p">:</span> <span class="s2">"2.0"</span>
<span class="p">}</span>
</code></pre></div>
<p>The gateway will take care of routing this message to the
correct service and returning a response to you.</p>
<p>If you want to accept requests from other services in the IRIS
ecosystem you can use the <code>jsonrpc_client</code>, simply
specifying an API endpoint that incoming requests will be delivered
to using the same syntax as above.</p>
<p>That's it!</p>
<h2>Asynchronous Calls</h2>
<p>The calls we've seen above were all synchronous, i.e. making a
call resulted in a direct response. Sometimes calls need to be
asynchronous though, e.g. because replying to them takes time. If
you make an asynchronous call to another service, you'll get back
an acknowledgment first. As soon as the service you've called has a
response ready, it will send it back to your via the
<code>eps</code> network, using the same <code>id</code> you
provided (which enables you to match the response to your request).
Likewise, you can respond to calls from other services in an
asynchronous way, simply pushing the response to your local
JSON-RPC server with a method name <code>respond</code> (without a
service name). Do not forget to include the same <code>id</code>
that you received with the original request, as this will contain
the "return address" of the request.</p>
<h2>Integration Example</h2>
<p>To get a concrete idea of how to integrate with the IRIS
infrastructure using the EPS server we have created a simple demo
setup that illustrates all components. The demo consists of three
components:</p>
<ul>
<li>An <code>eps</code> server simulating a <code>health
department</code>, named <code>hd-1</code></li>
<li>An <code>eps</code> server simulation an operator offering a
"locations" service, named <code>ls-1</code></li>
<li>The actual location service <code>eps-ls</code> offered by the
operator <code>ls-1</code></li>
</ul>
<h2>Getting Up And Running</h2>
<p>First, please check the README on how to create all necessary
TLS certificates and build the software. Then, start the individual
services on different terminals:</p>
<div class="codehilite">
<pre><code><span class=
"c1"># run the `eps` server of the "locations" operator ls-1</span>
<span class="nv">EPS_SETTINGS</span><span class=
"o">=</span>settings/dev/roles/ls-1 eps --level debug server run
<span class=
"c1"># run the `eps` server of the health department hd-1</span>
<span class="nv">EPS_SETTINGS</span><span class=
"o">=</span>settings/dev/roles/hd-1 eps --level debug server run
<span class="c1"># run the "locations" service</span>
eps-ls
</code></pre></div>
<h2>Testing</h2>
<p>Now your system should be up and running. The demo "locations"
service provides a simple, authenticationless JSON-RPC interface
with two methods: <code>add</code>, which will add a location to
the database, and <code>lookup</code>, which will look up a
location based on its <code>name</code>. For example, to add a
location to the service:</p>
<div class="codehilite">
<pre><code>curl --cacert settings/dev/certs/root.crt --resolve hd-1:5555:127.0.0.1 https://hd-1:5555/jsonrpc --header <span class="s2">"Content-Type: application/json"</span> --data <span class="s1">'{"method": "ls-1.add", "id": "1", "params": {"name": "Ginos", "id": "af5ca4da5caa"}, "jsonrpc": "2.0"}'</span> <span class="m">2</span>&gt;/dev/null <span class="p">|</span> jq 
</code></pre></div>
<p>This should return a simple JSON response:</p>
<div class="codehilite">
<pre><code><span class="p">{</span>
  <span class="nt">"jsonrpc"</span><span class=
"p">:</span> <span class="s2">"2.0"</span><span class="p">,</span>
  <span class="nt">"result"</span><span class=
"p">:</span> <span class="p">{</span>
    <span class="nt">"_"</span><span class=
"p">:</span> <span class="s2">"ok"</span>
  <span class="p">},</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class=
"s2">"1"</span>
<span class="p">}</span>
</code></pre></div>
<p>The request first went to the health department's
<code>eps</code> server, was first routed to <code>ls-1</code>'s
<code>eps</code> server via gRPC and was then passed to the
JSON-RPC API of the local <code>eps-ls</code> service running
there. The result was then passsed back along the entire chain.</p>
<p>You can also perform a lookup of the location you've just
added:</p>
<div class="codehilite">
<pre><code>curl --cacert settings/dev/certs/root.crt --resolve hd-1:5555:127.0.0.1 https://hd-1:5555/jsonrpc --header <span class="s2">"Content-Type: application/json"</span> --data <span class="s1">'{"method": "ls-1.lookup", "id": "1", "params": {"name": "Ginos"}, "jsonrpc": "2.0"}'</span> <span class="m">2</span>&gt;/dev/null <span class="p">|</span> jq .
</code></pre></div>
<p>which should return</p>
<div class="codehilite">
<pre><code><span class="p">{</span>
  <span class="nt">"jsonrpc"</span><span class=
"p">:</span> <span class="s2">"2.0"</span><span class="p">,</span>
  <span class="nt">"result"</span><span class=
"p">:</span> <span class="p">{</span>
    <span class="nt">"id"</span><span class=
"p">:</span> <span class="s2">"af5ca4da5caa"</span><span class=
"p">,</span>
    <span class="nt">"name"</span><span class=
"p">:</span> <span class="s2">"Ginos"</span>
  <span class="p">},</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class=
"s2">"1"</span>
<span class="p">}</span>
</code></pre></div>
<p>Hence, interacting with the remote "locations" service is just
like calling a local JSON-RPC service, except that you specify the
name of the operator running the service, <code>ls-1.lookup</code>,
instead of just calling <code>lookup</code>.</p>
</div>
</div>
</section>
</div>
</div>
<script defer type="text/javascript" src=
"/eps/docs/static/js/bulma.js"></script>
</body>
</html>
