<!DOCTYPE html>
<html lang="de">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.6.0">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content=
"width=device-width, initial-scale=1">
<title>EPS-Dokumentation | EPS Service - Übersicht</title>
<link rel="stylesheet" type="text/css" href=
"/eps/docs/static/css/main.css">
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script src="/eps/docs/static/js/mathjax/tex-chtml.js" id=
"MathJax-script" async></script>
<style type="text/css">
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .tango .hll { background-color: #ffffcc }
.highlight .tango { background: #f8f8f8; }
.highlight .tango .c { color: #8f5902; font-style: italic } /* Comment */
.highlight .tango .err { color: #a40000; border: 1px solid #ef2929 } /* Error */
.highlight .tango .g { color: #000000 } /* Generic */
.highlight .tango .k { color: #204a87; font-weight: bold } /* Keyword */
.highlight .tango .l { color: #000000 } /* Literal */
.highlight .tango .n { color: #000000 } /* Name */
.highlight .tango .o { color: #ce5c00; font-weight: bold } /* Operator */
.highlight .tango .x { color: #000000 } /* Other */
.highlight .tango .p { color: #000000; font-weight: bold } /* Punctuation */
.highlight .tango .ch { color: #8f5902; font-style: italic } /* Comment.Hashbang */
.highlight .tango .cm { color: #8f5902; font-style: italic } /* Comment.Multiline */
.highlight .tango .cp { color: #8f5902; font-style: italic } /* Comment.Preproc */
.highlight .tango .cpf { color: #8f5902; font-style: italic } /* Comment.PreprocFile */
.highlight .tango .c1 { color: #8f5902; font-style: italic } /* Comment.Single */
.highlight .tango .cs { color: #8f5902; font-style: italic } /* Comment.Special */
.highlight .tango .gd { color: #a40000 } /* Generic.Deleted */
.highlight .tango .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .tango .gr { color: #ef2929 } /* Generic.Error */
.highlight .tango .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .tango .gi { color: #00A000 } /* Generic.Inserted */
.highlight .tango .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .tango .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .tango .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .tango .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .tango .gt { color: #a40000; font-weight: bold } /* Generic.Traceback */
.highlight .tango .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .tango .kd { color: #204a87; font-weight: bold } /* Keyword.Declaration */
.highlight .tango .kn { color: #204a87; font-weight: bold } /* Keyword.Namespace */
.highlight .tango .kp { color: #204a87; font-weight: bold } /* Keyword.Pseudo */
.highlight .tango .kr { color: #204a87; font-weight: bold } /* Keyword.Reserved */
.highlight .tango .kt { color: #204a87; font-weight: bold } /* Keyword.Type */
.highlight .tango .ld { color: #000000 } /* Literal.Date */
.highlight .tango .m { color: #0000cf; font-weight: bold } /* Literal.Number */
.highlight .tango .s { color: #4e9a06 } /* Literal.String */
.highlight .tango .na { color: #c4a000 } /* Name.Attribute */
.highlight .tango .nb { color: #204a87 } /* Name.Builtin */
.highlight .tango .nc { color: #000000 } /* Name.Class */
.highlight .tango .no { color: #000000 } /* Name.Constant */
.highlight .tango .nd { color: #5c35cc; font-weight: bold } /* Name.Decorator */
.highlight .tango .ni { color: #ce5c00 } /* Name.Entity */
.highlight .tango .ne { color: #cc0000; font-weight: bold } /* Name.Exception */
.highlight .tango .nf { color: #000000 } /* Name.Function */
.highlight .tango .nl { color: #f57900 } /* Name.Label */
.highlight .tango .nn { color: #000000 } /* Name.Namespace */
.highlight .tango .nx { color: #000000 } /* Name.Other */
.highlight .tango .py { color: #000000 } /* Name.Property */
.highlight .tango .nt { color: #204a87; font-weight: bold } /* Name.Tag */
.highlight .tango .nv { color: #000000 } /* Name.Variable */
.highlight .tango .ow { color: #204a87; font-weight: bold } /* Operator.Word */
.highlight .tango .w { color: #f8f8f8; text-decoration: underline } /* Text.Whitespace */
.highlight .tango .mb { color: #0000cf; font-weight: bold } /* Literal.Number.Bin */
.highlight .tango .mf { color: #0000cf; font-weight: bold } /* Literal.Number.Float */
.highlight .tango .mh { color: #0000cf; font-weight: bold } /* Literal.Number.Hex */
.highlight .tango .mi { color: #0000cf; font-weight: bold } /* Literal.Number.Integer */
.highlight .tango .mo { color: #0000cf; font-weight: bold } /* Literal.Number.Oct */
.highlight .tango .sa { color: #4e9a06 } /* Literal.String.Affix */
.highlight .tango .sb { color: #4e9a06 } /* Literal.String.Backtick */
.highlight .tango .sc { color: #4e9a06 } /* Literal.String.Char */
.highlight .tango .dl { color: #4e9a06 } /* Literal.String.Delimiter */
.highlight .tango .sd { color: #8f5902; font-style: italic } /* Literal.String.Doc */
.highlight .tango .s2 { color: #4e9a06 } /* Literal.String.Double */
.highlight .tango .se { color: #4e9a06 } /* Literal.String.Escape */
.highlight .tango .sh { color: #4e9a06 } /* Literal.String.Heredoc */
.highlight .tango .si { color: #4e9a06 } /* Literal.String.Interpol */
.highlight .tango .sx { color: #4e9a06 } /* Literal.String.Other */
.highlight .tango .sr { color: #4e9a06 } /* Literal.String.Regex */
.highlight .tango .s1 { color: #4e9a06 } /* Literal.String.Single */
.highlight .tango .ss { color: #4e9a06 } /* Literal.String.Symbol */
.highlight .tango .bp { color: #3465a4 } /* Name.Builtin.Pseudo */
.highlight .tango .fm { color: #000000 } /* Name.Function.Magic */
.highlight .tango .vc { color: #000000 } /* Name.Variable.Class */
.highlight .tango .vg { color: #000000 } /* Name.Variable.Global */
.highlight .tango .vi { color: #000000 } /* Name.Variable.Instance */
.highlight .tango .vm { color: #000000 } /* Name.Variable.Magic */
.highlight .tango .il { color: #0000cf; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div id="translation-notice">
<div class="message is-info">
<div class="message-body">
<p>Diese Website wurde größtenteils automatisch aus der <a href=
"/eps/docs/eps-service">deutschen Version</a> übersetzt. Wir
entschuldigen uns für eventuelle Übersetzungsfehler.</p>
<span class="x" onclick=
"localStorage.setItem('translation-notice', true);notice.style.display = 'none'">x</span></div>
</div>
</div>
<script>
var notice = document.getElementById("translation-notice")
if (localStorage.getItem("translation-notice") === null && notice !== null){
        notice.style.display = "block"
}
</script>
<nav class="navbar is-dark">
<div class="navbar-brand"><span class="navbar-burger burger"
data-target="side-menu" data-toggle="collapse"><span>&nbsp;</span>
<span>&nbsp;</span> <span>&nbsp;</span></span></div>
</nav>
<div class="main">
<div class="side-menu" id="side-menu" data-toggle-class=
"is-active">
<aside class="menu">
<p class="menu-label" style="text-align:center"><a href=
"/eps/de/doku">EPS-Dokumentation</a></p>
<ul class="menu-list">
<li><a href="/eps/de/doku">Start</a></li>
<li><a href="/eps/de/doku/getting-started">Erste Schritte</a></li>
<li><a class="is-active" href="#" data-toggle="collapse"
data-target="page-eps-nav">EPS Service</a>
<ul class="" id="page-eps-nav">
<li><a href="/eps/de/doku/eps-service">Übersicht</a></li>
</ul>
</li>
<li><a class="" href="#" data-toggle="collapse" data-target=
"page-proxy-nav">Proxy Service</a>
<ul class="is-hidden" id="page-proxy-nav">
<li><a href="/eps/de/doku/proxy-service">Übersicht</a></li>
<li><a href=
"/eps/de/doku/proxy-service/installation">Installation</a></li>
<li><a href=
"/eps/de/doku/proxy-service/configuration">Konfiguration</a></li>
</ul>
</li>
<li><a class="" href="#" data-toggle="collapse" data-target=
"page-sd-nav">Service Directory</a>
<ul class="is-hidden" id="page-sd-nav">
<li><a href="/eps/de/doku/service-directory">Übersicht</a></li>
<li><a href=
"/eps/de/doku/service-directory/installation">Installation</a></li>
<li><a href=
"/eps/de/doku/service-directory/configuration">Konfiguration</a></li>
</ul>
</li>
<li><a href="/eps/de/doku/kontakt">Kontakt</a></li>
<li><a href="#" data-toggle="collapse" data-target=
"menu-language-dropdown">Sprachen</a>
<ul id="menu-language-dropdown" class="is-hidden">
<li><a class="" href="/eps/docs/eps-service">English</a></li>
<li><a class="is-open is-active" href=
"/eps/de/doku/eps-service">Deutsch</a></li>
</ul>
</li>
</ul>
</aside>
</div>
<div class="with-comments">
<div class="comments"></div>
<section class="section first">
<div class="content">
<div class="content markdown">
<h1>Integration</h1>
<p>Die Integration in die IRIS-Infrastruktur ist einfach (hoffen
wir). Zuerst müssen Sie den <code>eps</code> Server zusammen mit
den Einstellungen und Zertifikaten, die wir Ihnen zur Verfügung
gestellt haben, bereitstellen. Dies ist so einfach wie das
Herunterladen der neuesten <code>eps</code> Version von unserem
Server, das Entpacken des Einstellungsarchivs, das wir Ihnen zur
Verfügung gestellt haben, und das Ausführen von</p>
<p><code>`bash EPS_SETTINGS=Pfad/zu/Einstellungen eps
Serverlauf</code> `</p>
<p>Dies sollte einen lokalen JSON-RPC-Server auf Port
<code>5555</code> öffnen, mit dem Sie sich über TLS verbinden
können (dazu müssen Sie das Root-CA-Zertifikat zu Ihrer
Zertifikatskette hinzufügen). Dieser Server ist Ihr Gateway zu
allen IRIS-Diensten. Schauen Sie einfach nach den Diensten, die ein
bestimmter Betreiber anbietet, und senden Sie eine Anfrage, die den
Namen des Betreibers und die Dienstmethode enthält, die Sie
aufrufen möchten. Um z. B. mit dem Dienst "locations" zu
interagieren, der vom Betreiber "ls-1" bereitgestellt wird, würden
Sie einfach eine JSON-RPC-Nachricht wie diese senden:</p>
<p><code>`json { "Methode": "ls-1.add", "id": "1", "Params": {
"Name": "Ginos", "id": "af5ca4da5caa" }, "jsonrpc": "2.0" }</code>
`</p>
<p>Das Gateway kümmert sich darum, diese Nachricht an den richtigen
Dienst weiterzuleiten und eine Antwort an Sie zurückzuschicken.</p>
<p>Wenn Sie Anfragen von anderen Diensten im IRIS-Ökosystem
akzeptieren möchten, können Sie die <code>jsonrpc_client</code>
verwenden. Dabei geben Sie einfach einen API-Endpunkt an, an den
eingehende Anfragen mit der gleichen Syntax wie oben zugestellt
werden sollen.</p>
<p>Das war's!</p>
<h2>Asynchrone Anrufe</h2>
<p>Die Anrufe, die wir oben gesehen haben, waren alle synchron, d.
h. ein Anruf führte zu einer direkten Antwort. Manchmal müssen
Aufrufe jedoch asynchron sein, z. B. weil die Beantwortung Zeit
benötigt. Wenn Sie einen asynchronen Aufruf an einen anderen Dienst
tätigen, erhalten Sie zunächst eine Bestätigung zurück. Sobald der
von Ihnen aufgerufene Dienst eine Antwort bereit hat, sendet er
diese über das Netzwerk <code>eps</code> an Sie zurück, wobei er
dieselbe <code>id</code> verwendet, die Sie angegeben haben
(wodurch Sie die Antwort mit Ihrer Anfrage abgleichen können).
Ebenso können Sie auf Aufrufe von anderen Diensten asynchron
reagieren, indem Sie die Antwort einfach mit dem Methodennamen
<code>respond</code> (ohne Dienstnamen) an Ihren lokalen
JSON-RPC-Server schieben. Vergessen Sie nicht, dieselbe
<code>id</code> anzugeben, die Sie mit der ursprünglichen Anfrage
erhalten haben, da diese die "Rücksendeadresse" der Anfrage
enthält.</p>
<h2>Integration Beispiel</h2>
<p>Um eine konkrete Vorstellung von der Integration mit der
IRIS-Infrastruktur unter Verwendung des EPS-Servers zu bekommen,
haben wir ein einfaches Demo-Setup erstellt, das alle Komponenten
veranschaulicht. Die Demo besteht aus drei Komponenten:</p>
<ul>
<li>Ein <code>eps</code> Server, der einen <code>health
department</code> simuliert, namens <code>hd-1</code></li>
<li>Eine <code>eps</code> Server-Simulation eines Betreibers, der
einen "Standort"-Dienst anbietet, namens <code>ls-1</code></li>
<li>Der tatsächliche vom Betreiber angebotene Ortungsdienst
<code>eps-ls</code> <code>ls-1</code></li>
</ul>
<h2>Aufstehen und loslegen</h2>
<p>Lesen Sie bitte zuerst in der README nach, wie Sie alle
notwendigen TLS-Zertifikate erstellen und die Software bauen.
Starten Sie dann die einzelnen Dienste auf verschiedenen
Terminals:</p>
<p>`bash</p>
<h1>führen Sie den <code>eps</code> Server des
"Standorte"-Operators ls-1 aus</h1>
<p>EPS_SETTINGS=settings/dev/roles/ls-1 eps --level debug server
run</p>
<h1>Betreiben Sie den <code>eps</code> Server des Gesundheitsamtes
hd-1</h1>
<p>EPS_SETTINGS=settings/dev/roles/hd-1 eps --level debug server
run</p>
<h1>Führen Sie den Dienst "Standorte" aus</h1>
<p>eps-ls `</p>
<h2>Testen</h2>
<p>Jetzt sollte Ihr System einsatzbereit sein. Der Demo-Dienst
"locations" bietet eine einfache, authentifizierungsfreie
JSON-RPC-Schnittstelle mit zwei Methoden: <code>add</code>, die
einen Ort zur Datenbank hinzufügt, und <code>lookup</code>, die
einen Ort anhand seiner <code>name</code> nachschlägt. Zum
Beispiel, um dem Dienst einen Ort hinzuzufügen:</p>
<p><code>`bash curl --cacert settings/dev/certs/root.crt --resolve
hd-1:5555:127.0.0.1 https://hd-1:5555/jsonrpc --header
"Content-Type: application/json" --data '{"method": "ls-1.add",
"id": "1", "params": {"name": "Ginos", "id": "af5ca4da5caa"},
"jsonrpc": "2.0"}' 2&amp;gt;/dev/null | jq</code> `</p>
<p>Dies sollte eine einfache JSON-Antwort zurückgeben:</p>
<p><code>`json { "jsonrpc": "2.0", "Ergebnis": { "_": "ok" }, "id":
"1" }</code> `</p>
<p>Die Anfrage ging zunächst an den <code>eps</code> Server des
Gesundheitsamtes, wurde über gRPC zunächst an den <code>ls-1</code>
's <code>eps</code> Server weitergeleitet und wurde dann an die
JSON-RPC API des dort laufenden lokalen <code>eps-ls</code>
Dienstes übergeben. Das Ergebnis wurde dann entlang der gesamten
Kette zurückgereicht.</p>
<p>Sie können auch eine Suche nach dem Ort durchführen, den Sie
gerade hinzugefügt haben:</p>
<p><code>`bash curl --cacert settings/dev/certs/root.crt --resolve
hd-1:5555:127.0.0.1 https://hd-1:5555/jsonrpc --header
"Content-Type: application/json" --data '{"method": "ls-1.lookup",
"id": "1", "params": {"name": "Ginos"}, "jsonrpc": "2.0"}'
2&amp;gt;/dev/null | jq .</code> `</p>
<p>die Folgendes zurückgeben sollte</p>
<p><code>`json { "jsonrpc": "2.0", "Ergebnis": { "id":
"af5ca4da5caa", "Name": "Ginos" }, "id": "1" }</code> `</p>
<p>Daher ist die Interaktion mit dem entfernten "locations"-Dienst
genauso wie der Aufruf eines lokalen JSON-RPC-Dienstes, außer dass
Sie den Namen des Operators, der den Dienst ausführt,
<code>ls-1.lookup</code>, angeben, anstatt einfach
<code>lookup</code> aufzurufen.</p>
</div>
</div>
</section>
</div>
</div>
<script defer type="text/javascript" src=
"/eps/docs/static/js/bulma.js"></script>
</body>
</html>
